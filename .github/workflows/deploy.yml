# TÃªn cá»§a quy trÃ¬nh tá»± Ä‘á»™ng
name: Deploy Code to Hosting

# Cháº¡y khi nÃ o? -> Khi Ä‘áº©y code lÃªn nhÃ¡nh 'main'
on:
  push:
    branches:
      - main  # Náº¿u nhÃ¡nh chÃ­nh cá»§a báº¡n tÃªn lÃ  'master' thÃ¬ sá»­a 'main' thÃ nh 'master'

# LÃ m gÃ¬?
jobs:
  web-deploy:
    name: ğŸ‰ Deploy
    runs-on: ubuntu-latest # DÃ¹ng má»™t mÃ¡y chá»§ áº£o cá»§a GitHub Ä‘á»ƒ cháº¡y
    steps:
    # 1. Láº¥y code má»›i nháº¥t vá»
    - name: ğŸšš Get latest code
      uses: actions/checkout@v4

    # 2. CÃ i Ä‘áº·t Node.js phiÃªn báº£n 18 (hoáº·c 20)
    - name: ğŸ”§ Use Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'

    # 3. CÃ i Ä‘áº·t thÆ° viá»‡n (giá»‘ng há»‡t npm install)
    - name: ğŸ“¦ Install Dependencies
      run: npm install

    # 4. Build code (giá»‘ng há»‡t npm run build)
    - name: ğŸ—ï¸ Build Project
      run: npm run build

    # 5. Upload file Ä‘Ã£ build (thÆ° má»¥c dist) lÃªn hosting
    - name: ğŸ“‚ Sync files to Hosting via FTP
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5
      with:
        # Láº¥y thÃ´ng tin tá»« "kÃ©t sáº¯t" (BÆ°á»›c 2)
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        
        # ThÆ° má»¥c trÃªn mÃ¡y GitHub (NÆ¡i chá»©a code Ä‘Ã£ build)
        local-dir: ./dist/        
        
        # ThÆ° má»¥c trÃªn Hosting (NÆ¡i báº¡n muá»‘n up code vÃ o)
        # Sá»¬A CHá»– NÃ€Y CHO ÄÃšNG Vá»šI HOSTING Cá»¦A Báº N
        server-dir: ./public_html/seo-key-youtube/